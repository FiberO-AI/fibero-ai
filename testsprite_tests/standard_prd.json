{
  "meta": {
    "project": "Fibero AI Platform",
    "date": "2025-09-13",
    "prepared_by": "Generated by Development Manager"
  },
  "product_overview": "Fibero AI Platform is a modern AI model comparison and chat service that enables users to interact with multiple AI models concurrently, manage usage credits, and securely authenticate with enhanced security features. The platform integrates diverse AI models through OpenRouter API and supports both free and paid AI interactions wrapped in an intuitive glassmorphism UI with responsive design.",
  "core_goals": [
    "Provide a seamless and secure authentication system including email/password, OAuth, email verification, and two-factor authentication.",
    "Offer a flexible credit management system with free and paid credit tiers, real-time credit tracking, and purchase options.",
    "Enable users to compare responses across multiple AI models, supporting more than 13 models with differentiation of free and paid usage.",
    "Deliver a user-friendly interface that supports dark/light mode, responsive design, and easy navigation with modals and notifications.",
    "Ensure robust backend API support with RESTful endpoints for chat, 2FA, and user management with validation and security.",
    "Maintain rigorous security standards with 2FA, secure session management, input validation, and protection against common web vulnerabilities."
  ],
  "key_features": [
    "Complete Firebase Authentication system with email/password login, Google OAuth integration, email verification flow, password reset, and two-factor authentication (TOTP, backup codes).",
    "Comprehensive Credit Management System that provides new users with 10 free credits, manages credit deductions (2 credits per paid prompt), supports credit purchases via Stripe integration, and real-time updates via Firestore with localStorage fallback.",
    "AI Model Comparison Interface supporting 13+ AI models (5 paid and 8+ free) with ability to send prompts to multiple models simultaneously, compare responses side-by-side, rate responses, and select the best outputs.",
    "Modern UI Components implementing glassmorphism style with support for dark and light modes, responsive layouts, modal dialogs, toast notifications, and settings management pages.",
    "Robust API endpoints for chat interaction, 2FA setup, verification and disablement, backup code management, and authentication with proper validation and error handling.",
    "Security Enhancements including input sanitization, session security, two-factor authentication, backup codes, and secure API key management.",
    "Custom Email Verification system featuring attractive success pages, animated feedback elements, and automatic redirects post-verification.",
    "Payment Integration allowing tiered credit purchases with Stripe readiness and a visually appealing purchase interface.",
    "Data Persistence utilizing Firestore as primary storage for user data, credits, and settings, with localStorage fallback for offline and resilience."
  ],
  "user_flow_summary": [
    "User registers via email/password or Google OAuth, completes email verification and optionally sets up two-factor authentication.",
    "User logs in and is authenticated with session persistence and optional 2FA challenge.",
    "User accesses AI model comparison interface to select from multiple AI models and inputs prompts for comparison results.",
    "For paid AI models, the system checks and deducts user credits accordingly; if insufficient, the user is prompted to purchase credits.",
    "User can view real-time credit balances and purchase additional credits through a Stripe-integrated purchase flow.",
    "Users can manage account settings including 2FA setup/disablement and view backup codes for secure access.",
    "AI prompts are sent via the backend REST API, which validates requests, verifies authentication, enforces credit limits, and processes multi-model responses.",
    "User interacts with the UI supporting dark/light themes, responsive design, modals for feedback, and toast notifications for system messages."
  ],
  "validation_criteria": [
    "Authentication workflows succeed with email/password, OAuth, email verification, password reset, and 2FA.",
    "Credit allocation is correctly initialized for new users; credit deductions match usage; and real-time updates are consistent across devices.",
    "AI model requests correctly route to OpenRouter API with distinctions between free and paid models; timely and accurate multi-model responses received.",
    "User Interface elements render correctly in dark and light modes, across devices, with proper modals and notification functionality.",
    "API endpoints validate requests, enforce authentication and credit checks, and respond with consistent error handling and data formats.",
    "Security protocols prevent unauthorized access, protect against XSS and injections, and maintain session integrity including 2FA.",
    "Payment system correctly processes credit purchases with multiple tiers and reflects updates promptly in user accounts.",
    "Email verification displays correct UI flow with success animations and completes redirects automatically.",
    "Data persistence layers store and sync user data and credits reliably, using Firestore with fallback to localStorage when offline."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 15.5.2",
      "React 19.1.0",
      "Firebase Auth",
      "Firestore",
      "TailwindCSS",
      "OpenRouter API",
      "Node.js"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Complete Firebase authentication with email/password, Google OAuth, email verification, password reset, and 2FA support",
        "files": [
          "contexts/AuthContext.tsx",
          "lib/firebase.ts",
          "app/components/LoginPage.tsx",
          "app/components/SignupPage.tsx",
          "app/components/TwoFactorVerification.tsx",
          "app/components/EmailVerification.tsx",
          "app/auth/action/page.tsx",
          "app/verify/page.tsx",
          "app/api/2fa/setup/route.ts",
          "app/api/2fa/verify/route.ts",
          "app/api/2fa/verify-login/route.ts",
          "app/api/2fa/disable/route.ts",
          "app/api/2fa/backup-codes/route.ts"
        ]
      },
      {
        "name": "Credit Management System",
        "description": "Comprehensive credit system with 10 free credits for new users, 2 credits per paid model prompt, real-time tracking via Firestore with localStorage fallback",
        "files": [
          "contexts/AuthContext.tsx",
          "app/components/CreditPurchase.tsx",
          "app/api/chat/route.ts"
        ]
      },
      {
        "name": "AI Model Comparison",
        "description": "Multi-model AI comparison interface supporting 13+ models (5 paid, 8+ free) with OpenRouter integration, response comparison, rating system, and best response selection",
        "files": [
          "app/components/ModelComparison.tsx",
          "app/api/chat/route.ts"
        ]
      },
      {
        "name": "User Interface Components",
        "description": "Modern glassmorphism UI with dark/light mode toggle, responsive design, modal system, toast notifications, and settings management",
        "files": [
          "app/components/ModelComparison.tsx",
          "app/components/Modal.tsx",
          "app/components/Toast.tsx",
          "app/components/SettingsPage.tsx",
          "app/components/AccountSettings.tsx",
          "app/globals.css"
        ]
      },
      {
        "name": "API Endpoints",
        "description": "RESTful API endpoints for chat functionality, 2FA operations, and user management with proper authentication and validation",
        "files": [
          "app/api/chat/route.ts",
          "app/api/2fa/setup/route.ts",
          "app/api/2fa/verify/route.ts",
          "app/api/2fa/verify-login/route.ts",
          "app/api/2fa/disable/route.ts",
          "app/api/2fa/backup-codes/route.ts"
        ]
      },
      {
        "name": "Security Features",
        "description": "Two-factor authentication with TOTP, backup codes, secure session management, and input validation",
        "files": [
          "app/components/TwoFactorVerification.tsx",
          "app/components/AccountSettings.tsx",
          "app/api/2fa/setup/route.ts",
          "app/api/2fa/verify/route.ts",
          "app/api/2fa/verify-login/route.ts",
          "app/api/2fa/disable/route.ts",
          "app/api/2fa/backup-codes/route.ts"
        ]
      },
      {
        "name": "Email Verification Flow",
        "description": "Custom email verification system with beautiful success pages, animated UI elements, and automatic redirects",
        "files": [
          "app/auth/action/page.tsx",
          "app/verify/page.tsx",
          "app/components/EmailVerification.tsx",
          "contexts/AuthContext.tsx"
        ]
      },
      {
        "name": "Payment Integration",
        "description": "Credit purchase system with multiple pricing tiers, Stripe integration ready, and beautiful purchase interface",
        "files": [
          "app/components/CreditPurchase.tsx",
          "contexts/AuthContext.tsx"
        ]
      },
      {
        "name": "Data Persistence",
        "description": "Firestore integration for user data, credits, and settings with localStorage fallback for offline functionality",
        "files": [
          "lib/firebase.ts",
          "contexts/AuthContext.tsx",
          "app/api/chat/route.ts"
        ]
      },
      {
        "name": "Configuration Management",
        "description": "Environment configuration, Next.js setup with Turbopack, TypeScript configuration, and security headers",
        "files": [
          "next.config.ts",
          "tsconfig.json",
          "package.json",
          ".env.local"
        ]
      }
    ]
  }
}
